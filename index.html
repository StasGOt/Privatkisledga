<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>–£—á—ë—Ç –ø—Ä–∏–≤–∞—Ç–æ–∫ –∏ –¥–æ—Ö–æ–¥–∞</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  </head>
  <body>
    <header class="app-header">
      <div class="header-left">
        <h1>–ú–æ–∏ –ø—Ä–∏–≤–∞—Ç–∫–∏</h1>
        <div class="theme-toggle">
          <button id="themeToggle" class="theme-btn" title="–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å —Ç–µ–º—É">
            <span class="theme-icon">üåô</span>
          </button>
        </div>
      </div>
      <div class="header-actions">
        <button id="exportBtn" class="secondary">–≠–∫—Å–ø–æ—Ä—Ç</button>
        <button id="exportExcelBtn" class="secondary">Excel</button>
        <input id="importFile" type="file" accept="application/json" hidden />
        <button id="importBtn" class="secondary">–ò–º–ø–æ—Ä—Ç</button>
        <button id="backupBtn" class="secondary">–†–µ–∑–µ—Ä–≤</button>
        <button id="resetAllBtn" class="danger">–°–±—Ä–æ—Å–∏—Ç—å –≤—Å—ë</button>
      </div>
    </header>

    <main class="layout">
      <section class="panel">
        <h2>–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–≤–∞—Ç–∫—É</h2>
        <form id="addForm" class="add-form" autocomplete="off">
          <label class="field">
            <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
            <input id="nameInput" type="text" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: Jailbreak #1" required />
          </label>
          <label class="field">
            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
            <select id="categoryInput">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
              <option value="jailbreak">Jailbreak</option>
              <option value="modded">–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
              <option value="vanilla">–í–∞–Ω–∏–ª—å–Ω—ã–µ</option>
              <option value="custom">–ö–∞—Å—Ç–æ–º–Ω—ã–µ</option>
              <option value="other">–î—Ä—É–≥–æ–µ</option>
            </select>
          </label>
          <label class="field">
            <span>–¶–µ–Ω–∞ (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)</span>
            <input id="priceInput" type="number" step="0.01" inputmode="decimal" placeholder="–ù–∞–ø—Ä.: 20" />
          </label>
          <label class="field">
            <span>–î–∞—Ç–∞ —Å–¥–∞—á–∏</span>
            <input id="dueDateInput" type="date" />
          </label>
          <label class="field">
            <span>–ó–∞–º–µ—Ç–∫–∞</span>
            <input id="noteInput" type="text" placeholder="–ö–æ–º—É —Å–¥–∞–Ω–∞, —Å—Ä–æ–∫ –∏ —Ç.–ø." />
          </label>
          <label class="field">
            <span>–°—Ç–∞—Ç—É—Å</span>
            <div class="switch" title="–°–¥–∞–Ω–∞ / –ù–µ —Å–¥–∞–Ω–∞">
              <input id="rentedInput" type="checkbox" />
              <span class="switch-ui"></span>
              <span class="switch-text" data-off="–ù–µ —Å–¥–∞–Ω–∞" data-on="–°–¥–∞–Ω–∞"></span>
            </div>
          </label>
          <button type="submit" class="primary">–î–æ–±–∞–≤–∏—Ç—å</button>
        </form>

        <div class="filters">
          <button class="chip active" data-filter="all">–í—Å–µ</button>
          <button class="chip" data-filter="rented">–°–¥–∞–Ω–∞</button>
          <button class="chip" data-filter="free">–ù–µ —Å–¥–∞–Ω–∞</button>
          <button class="chip" data-filter="overdue">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω—ã</button>
          <select id="categoryFilter" class="category-filter">
            <option value="">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>
            <option value="jailbreak">Jailbreak</option>
            <option value="modded">–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
            <option value="vanilla">–í–∞–Ω–∏–ª—å–Ω—ã–µ</option>
            <option value="custom">–ö–∞—Å—Ç–æ–º–Ω—ã–µ</option>
            <option value="other">–î—Ä—É–≥–æ–µ</option>
          </select>
          <input id="searchInput" type="text" placeholder="–ü–æ–∏—Å–∫..." class="search-input" />
          <div class="spacer"></div>
          <div class="stats" id="stats"></div>
        </div>

        <ul id="list" class="list"></ul>
      </section>

      <aside class="sidebar">
        <div class="panel earnings">
          <h2>–î–æ—Ö–æ–¥</h2>
          <div class="total" id="earningsTotal">0</div>
          <div class="earnings-chart">
            <canvas id="earningsChart"></canvas>
          </div>
          <form id="earningsForm" class="earnings-form" autocomplete="off">
            <input id="deltaInput" type="text" placeholder="+20 –∏–ª–∏ -5" />
            <button type="submit" class="primary">–ü—Ä–∏–º–µ–Ω–∏—Ç—å</button>
            <button type="button" id="add20" class="secondary">+20</button>
            <button type="button" id="sub5" class="secondary">-5</button>
            <button type="button" id="resetEarnings" class="danger">–°–±—Ä–æ—Å–∏—Ç—å</button>
          </form>
          <details class="history">
            <summary>–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</summary>
            <ul id="historyList"></ul>
          </details>
        </div>

        <div class="panel analytics">
          <h2>–ê–Ω–∞–ª–∏—Ç–∏–∫–∞</h2>
          <div class="analytics-grid">
            <div class="analytics-item">
              <span class="analytics-label">–ü—Ä–∏–≤–∞—Ç–æ–∫ —Å–µ–≥–æ–¥–Ω—è</span>
              <span class="analytics-value" id="todayCount">0</span>
            </div>
            <div class="analytics-item">
              <span class="analytics-label">–î–æ—Ö–æ–¥ –∑–∞ –º–µ—Å—è—Ü</span>
              <span class="analytics-value" id="monthlyEarnings">0</span>
            </div>
            <div class="analytics-item">
              <span class="analytics-label">–°—Ä–µ–¥–Ω—è—è —Ü–µ–Ω–∞</span>
              <span class="analytics-value" id="avgPrice">0</span>
            </div>
            <div class="analytics-item">
              <span class="analytics-label">–ü—Ä–æ—Å—Ä–æ—á–µ–Ω–æ</span>
              <span class="analytics-value" id="overdueCount">0</span>
            </div>
          </div>
        </div>

        <div class="panel notifications">
          <h2>–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è</h2>
          <div id="notificationsList" class="notifications-list">
            <!-- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
          </div>
        </div>
      </aside>
    </main>

    <footer class="app-footer">
      <span>–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ (localStorage).</span>
      <span class="footer-links">
        <button id="backupCloudBtn" class="link-btn">–†–µ–∑–µ—Ä–≤ –≤ –æ–±–ª–∞–∫–æ</button>
        <button id="restoreCloudBtn" class="link-btn">–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å</button>
      </span>
    </footer>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="editModal" class="modal" hidden>
      <div class="modal-content">
        <div class="modal-header">
          <h3>–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤–∞—Ç–∫—É</h3>
          <button id="closeModal" class="close-btn">√ó</button>
        </div>
        <form id="editForm" class="edit-form">
          <label class="field">
            <span>–ù–∞–∑–≤–∞–Ω–∏–µ</span>
            <input id="editNameInput" type="text" required />
          </label>
          <label class="field">
            <span>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</span>
            <select id="editCategoryInput">
              <option value="">–í—ã–±–µ—Ä–∏—Ç–µ –∫–∞—Ç–µ–≥–æ—Ä–∏—é</option>
              <option value="jailbreak">Jailbreak</option>
              <option value="modded">–ú–æ–¥–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ</option>
              <option value="vanilla">–í–∞–Ω–∏–ª—å–Ω—ã–µ</option>
              <option value="custom">–ö–∞—Å—Ç–æ–º–Ω—ã–µ</option>
              <option value="other">–î—Ä—É–≥–æ–µ</option>
            </select>
          </label>
          <label class="field">
            <span>–¶–µ–Ω–∞</span>
            <input id="editPriceInput" type="number" step="0.01" />
          </label>
          <label class="field">
            <span>–î–∞—Ç–∞ —Å–¥–∞—á–∏</span>
            <input id="editDueDateInput" type="date" />
          </label>
          <label class="field">
            <span>–ó–∞–º–µ—Ç–∫–∞</span>
            <input id="editNoteInput" type="text" />
          </label>
          <div class="modal-actions">
            <button type="submit" class="primary">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
            <button type="button" class="secondary" id="cancelEdit">–û—Ç–º–µ–Ω–∞</button>
          </div>
        </form>
      </div>
    </div>

    <script src="./script.js"></script>
  </body>
</html>
